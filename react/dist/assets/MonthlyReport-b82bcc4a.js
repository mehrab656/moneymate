import{R as h,r as s,j as e,a as o,F as m,d as N,m as I}from"./index-8e1ee696.js";import{W as Y}from"./WizCard-c3a4d722.js";import{M as $}from"./index-74298ed0.js";import{e as J}from"./index-dc02ab6d.js";import{R as Q}from"./index-80c335aa.js";import{B as U}from"./Button-0b808ca5.js";import"./AuthRoutes-2e952a6b.js";import"./unsupportedIterableToArray-5ed4c917.js";import"./classCallCheck-25f3f0e0.js";var F={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},T=h.createContext&&h.createContext(F),X=["attr","size","title"];function Z(t,r){if(t==null)return{};var n=ee(t,r),l,c;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(c=0;c<i.length;c++)l=i[c],!(r.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}function ee(t,r){if(t==null)return{};var n={},l=Object.keys(t),c,i;for(i=0;i<l.length;i++)c=l[i],!(r.indexOf(c)>=0)&&(n[c]=t[c]);return n}function g(){return g=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},g.apply(this,arguments)}function k(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);r&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,l)}return n}function y(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?k(Object(n),!0).forEach(function(l){te(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function te(t,r,n){return r=re(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function re(t){var r=ne(t,"string");return typeof r=="symbol"?r:String(r)}function ne(t,r){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,r||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function A(t){return t&&t.map((r,n)=>h.createElement(r.tag,y({key:n},r.attr),A(r.child)))}function L(t){return r=>h.createElement(le,g({attr:y({},t.attr)},r),A(t.child))}function le(t){var r=n=>{var{attr:l,size:c,title:i}=t,u=Z(t,X),p=c||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),h.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,u,{className:d,style:y(y({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),i&&h.createElement("title",null,i),t.children)};return T!==void 0?h.createElement(T.Consumer,null,n=>r(n)):r(F)}function b(t){return L({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 373.12c-25.24-31.67-40.08-59.43-45-83.18-22.55-88 112.61-88 90.06 0-5.45 24.25-20.29 52-45 83.18zm138.15 73.23c-42.06 18.31-83.67-10.88-119.3-50.47 103.9-130.07 46.11-200-18.85-200-54.92 0-85.16 46.51-73.28 100.5 6.93 29.19 25.23 62.39 54.43 99.5-32.53 36.05-60.55 52.69-85.15 54.92-50 7.43-89.11-41.06-71.3-91.09 15.1-39.16 111.72-231.18 115.87-241.56 15.75-30.07 25.56-57.4 59.38-57.4 32.34 0 43.4 25.94 60.37 59.87 36 70.62 89.35 177.48 114.84 239.09 13.17 33.07-1.37 71.29-37.01 86.64zm47-136.12C280.27 35.93 273.13 32 224 32c-45.52 0-64.87 31.67-84.66 72.79C33.18 317.1 22.89 347.19 22 349.81-3.22 419.14 48.74 480 111.63 480c21.71 0 60.61-6.06 112.37-62.4 58.68 63.78 101.26 62.4 112.37 62.4 62.89.05 114.85-60.86 89.61-130.19.02-3.89-16.82-38.9-16.82-39.58z"},child:[]}]})(t)}function ae(t){return L({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}const oe=({reff:t})=>{switch(t){case"air":return e(b,{className:"logo-reservations",color:"red"});case"booking":return e("i",{className:"logo-bookingcom logo-reservations"});case"vrbo":return e(b,{className:"logo-reservations",color:"red"});case"expedia":return e(b,{className:"logo-reservations",color:"red"});case"Cash":return e(ae,{fontSize:20,color:"gray"});case"cheque":return e(b,{className:"logo-reservations",color:"red"});default:return"Not Defined"}},ce=s.memo(oe),ie=({income:t,expense:r,sectorName:n,sl:l})=>o("tr",{children:[t?o(m,{children:[e("td",{className:"sl_class",children:l+1}),o("td",{colSpan:3,children:[t==null?void 0:t.description,o("div",{className:"sub-text",children:[e("a",{href:"#",style:{textDecoration:"none",marginRight:10},children:t.income_type}),e("a",{href:"#",style:{textDecoration:"none",marginRight:10},children:e(ce,{reff:t.reference})}),(t==null?void 0:t.income_type)==="reservation"&&o(m,{children:[e("a",{href:"#",style:{textDecoration:"none",marginRight:10},children:t.checkin_date}),e("a",{href:"#",style:{textDecoration:"none",marginRight:10},children:t==null?void 0:t.checkout_date})]})]})]}),e("td",{className:"amount",children:t.amount})]}):e(m,{children:e("td",{className:"sl_class",colSpan:5,children:e("b",{children:"-"})})}),e("td",{style:{borderTop:"hidden",borderBottom:"hidden"},children:" "}),r?o(m,{children:[e("td",{className:"sl_class",children:l+1}),e("td",{colSpan:3,children:r.name}),e("td",{className:"amount",children:r.amount})]}):e(m,{children:e("td",{className:"sl_class",colSpan:5,children:e("b",{children:"-"})})})]}),B={incomes:[],expenses:[],sector:{},length:0,netIncome:"",netIncomePercent:"",reportingMonth:"",summery:[]};function ye(){var R,P,M,j,C,_,z,E,D;const t=s.useRef(),[r,n]=s.useState(B),[l,c]=s.useState(!1),[i,u]=s.useState(null),[p,d]=s.useState([]),[w,O]=s.useState(""),[x,f]=s.useState(null);N.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.onmouseenter=N.stopTimer,a.onmouseleave=N.resumeTimer}});const[W,V]=s.useState([]);var v=[];const H=()=>{v=[];for(let a=0;a<r.length;a++)v.push(e(ie,{income:r.incomes[a],expense:r.expenses[a],sectorName:r.sector.name,sl:a},a));V(v)},K=()=>{c(!0),I.get("/report/get-monthly-report",{params:{from_date:i,category_id:w}}).then(({data:a})=>{f(null),n(a),H(),c(!1)}).catch(a=>{f(a.response.data.message),setTimeout(()=>{f(null)},3e3),c(!1)}),c(!1)};s.useEffect(()=>{document.title="Monthly Reports"},[]),s.useEffect(()=>{I.get("/income-categories").then(({data:a})=>{d(a.categories)}).catch(a=>{console.error("Error loading income categories:",a)})},[]);const S=a=>{a.preventDefault(),K()},q=()=>{c(!0),u(null),O(""),n(B),c(!1),f(null)};return o(m,{children:[e($,{loaderVisible:l}),o(Y,{className:"animated fadeInDown",children:[e("div",{className:"row mb-3",children:e("table",{children:e("tbody",{children:o("tr",{style:{border:"hidden"},children:[e("td",{children:e("form",{onSubmit:S,children:o("select",{className:"custom-form-control",value:w,id:"income-category",name:"income-category",onChange:a=>{const G=a.target.value||"";O(G)},children:[e("option",{defaultValue:!0,children:"Filter by income category"}),p.map(a=>e("option",{value:a.id,children:a.name},a.id))]})})}),e("td",{children:e("form",{onSubmit:S,children:e(J,{label:"Select Report Month",className:"custom-form-control",id:"from_date",selected:i,onChange:a=>u(a),dateFormat:"MM/yyyy",showMonthYearPicker:!0})})}),e("td",{width:"5%",children:e("form",{onSubmit:S,children:e("button",{className:"btn-add right",type:"submit",children:"Filter"})})}),e("td",{width:"5%",children:e("button",{className:"btn btn-warning",onClick:q,children:"Reset"})}),e("td",{children:e(Q,{trigger:()=>e(U,{variant:"outlined",children:"Print"}),content:()=>t.current})})]})})})}),x&&e("div",{className:"alert alert-danger",role:"alert",children:x}),e("div",{className:"row",ref:t,children:e("div",{className:"col-12",children:e("div",{className:"responsive",style:{overflow:"auto"},children:e("div",{className:"table-responsive-sm",children:o("table",{className:"table  table-bordered",children:[o("thead",{children:[e("tr",{className:"text-center",children:e("td",{colSpan:11,className:"bg-info",children:e("b",{children:((R=r.sector)==null?void 0:R.name)??"Monthly report"})})}),o("tr",{className:"text-center",children:[e("td",{colSpan:2,children:e("b",{children:"Reporting Month"})}),e("td",{colSpan:9,children:e("b",{children:r.reportingMonth})})]}),o("tr",{className:"text-center",children:[e("td",{colSpan:5,children:e("b",{children:"Incomes"})}),e("td",{colSpan:1,rowSpan:13,width:"5%"}),e("td",{colSpan:5,children:e("b",{children:"Expenses"})})]}),o("tr",{children:[e("td",{children:e("b",{children:"S/L"})}),e("td",{colSpan:3,children:e("b",{children:"Description"})}),e("td",{children:e("b",{children:"Amount"})}),e("td",{children:e("b",{children:"S/L"})}),e("td",{colSpan:3,children:e("b",{children:"Description"})}),e("td",{children:e("b",{children:"Amount"})})]})]}),o("tbody",{children:[W,o("tr",{children:[e("td",{className:"table_total bg-warning",colSpan:3,children:e("b",{children:"Total"})}),e("td",{className:"amount bg-warning",colSpan:2,children:e("b",{children:(P=r.summery)==null?void 0:P.totalIncome})}),e("td",{style:{borderTop:"hidden"}}),e("td",{className:"table_total bg-info",colSpan:3,children:e("b",{children:"Total"})}),e("td",{className:"amount bg-info",colSpan:2,children:e("b",{children:(M=r.summery)==null?void 0:M.totalExpense})})]}),o("tr",{children:[e("td",{colSpan:6}),e("td",{colSpan:5,rowSpan:3,children:"Remarks:"})]}),o("tr",{children:[e("td",{colSpan:4,children:o("b",{children:["Total Cost of ",r.reportingMonth]})}),e("td",{colSpan:2,className:"amount",children:e("b",{children:(j=r.summery)==null?void 0:j.totalExpense})})]}),o("tr",{children:[e("td",{colSpan:4,children:o("b",{children:["Total Income of ",r.reportingMonth]})}),e("td",{colSpan:2,className:"amount",children:e("b",{children:(C=r.summery)==null?void 0:C.totalIncome})})]}),o("tr",{children:[e("td",{colSpan:4,children:o("b",{children:["Net ",(_=r.summery)==null?void 0:_.title," of ",r.reportingMonth]})}),e("td",{colSpan:2,className:"amount",children:e("b",{children:(z=r.summery)==null?void 0:z.net})}),e("td",{colSpan:3,children:o("b",{children:["Net ",(E=r.summery)==null?void 0:E.title]})}),e("td",{className:"amount",colSpan:2,children:e("b",{children:(D=r.summery)==null?void 0:D.netPercent})})]})]})]})})})})})]})]})}export{ye as default};
