import{af as w,r as d,f as v,e as N,a as n,F as W,j as l,m as u}from"./index-8e1ee696.js";import{M as x}from"./index-74298ed0.js";function j(){let{id:h}=w();const[c,r]=d.useState(null),[o,s]=d.useState(!1),f=v(),{setNotification:p}=N(),[e,m]=d.useState({id:null,name:"",balance:""}),b=()=>{s(!0),u.get(`/wallets/${h}`).then(({data:a})=>{m(a),s(!1)}).catch(a=>{s(!1)})};h&&d.useEffect(()=>{b()},[]);const g=a=>{a.preventDefault(),s(!0),e.id?u.put(`/wallets/${e.id}`,e).then(()=>{p("Wallet name has been updated"),f("/wallets"),s(!1)}).catch(i=>{const t=i.response;t&&t.status===409?r({name:["Wallet name already exists"]}):t&&t.status===422&&r(t.data.errors),s(!1)}):u.post("/wallets",e).then(({data:i})=>{p(`${e.name} has been created`),f("/wallets"),s(!1)}).catch(i=>{const t=i.response;t&&t.status===409?r({name:["Wallet name already exists"]}):t&&t.status===422&&r(t.data.errors),s(!1)})};return n(W,{children:[l(x,{loaderVisible:o}),e.id&&n("h1",{children:["Update Wallet Name: ",e.name]}),!e.id&&l("h1",{children:"Add New Wallet"}),n("div",{className:"card animated fadeInDown",children:[o&&l("div",{className:"text-center",children:"Loading..."}),c&&l("div",{className:"alert",children:Object.keys(c).map(a=>l("p",{children:c[a][0]},a))}),!o&&n("form",{onSubmit:g,children:[n("div",{className:"form-group",children:[l("label",{htmlFor:"wallet_name",children:"Wallet Name"}),l("input",{value:e.name,onChange:a=>m({...e,name:a.target.value}),placeholder:"Wallet Name"})]}),n("div",{className:"form-group",children:[l("label",{htmlFor:"wallet_name",children:"Wallet Balance"}),l("input",{value:e.balance,onChange:a=>m({...e,balance:a.target.value}),placeholder:"Wallet Balance"})]}),l("button",{className:e.id?"btn-edit":"btn-add",children:e.id?"Update wallet name":"Add new wallet"})]})]})]})}export{j as default};
