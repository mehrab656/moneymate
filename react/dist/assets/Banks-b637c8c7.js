import{r as i,S as Y,j as e,a as s,L as $,m as k,d as V}from"./index-8e1ee696.js";import{W}from"./WizCard-c3a4d722.js";import{P as N}from"./Pagination-982a907e.js";import{M as K,ae as R,at as U}from"./index-74298ed0.js";import{A as q}from"./ActionButtonHelpers-3cc0c4c9.js";import{b as A,n as m}from"./AuthRoutes-2e952a6b.js";import{M as d}from"./Modal-bc712426.js";function ae(){const[g,l]=i.useState(!1),[S,D]=i.useState([]),[v,L]=i.useState(""),[o,P]=i.useState(1),[E,T]=i.useState(0),[w,h]=i.useState(!1),[x,F]=i.useState(null),[c,u]=i.useState({id:null,bank_name:""}),{applicationSettings:I,userRole:p}=i.useContext(Y),{num_data_per_page:j}=I,r=j,C=Math.ceil(E/r),_=S?S.filter(n=>n.bank_name.toLowerCase().includes(v.toLowerCase())):[],z=()=>{u({id:null,bank_name:""}),F(null),h(!0)},M=()=>{h(!1)},b=(n,t)=>{l(!0),k.get("/bank-names",{params:{page:n,pageSize:t}}).then(({data:a})=>{l(!1),D(a.data),T(a.total)}).catch(()=>{l(!1)})};i.useEffect(()=>{document.title="Manage Banks",b(o,r)},[o,r]);const B=n=>{P(n)},y=[];for(let n=1;n<=C;n++)y.push(e(N.Item,{active:n===o,onClick:()=>B(n),children:n},n));const H=n=>{n.preventDefault(),l(!0),c.id?k.put(`/bank-names/${c.id}`,c).then(t=>{h(!1),b(o,r),u({id:null,bank_name:""}),m("success",t==null?void 0:t.message,t==null?void 0:t.description),l(!1)}).catch(t=>{if(t.response){const a=t.response.data;m("error",a==null?void 0:a.message,a.description)}l(!1)}):k.post("/bank-names",c).then(({data:t})=>{h(!1),b(o,r),u({id:null,bank_name:""}),m("success",t==null?void 0:t.message,t==null?void 0:t.description),l(!1)}).catch(t=>{if(t.response){const a=t.response.data;m("error",a==null?void 0:a.message,a.description)}l(!1)})},O=[{actionName:"Edit",type:"route",route:"/bank/",actionFunction:"editModal",permission:"bank_edit",textClass:"text-info"},{actionName:"View",type:"modal",route:"",actionFunction:w,permission:"bank_view",textClass:"text-warning"},{actionName:"Delete",type:"modal",route:"",actionFunction:n=>{V.fire({title:"Are you sure?",text:`You will not be able to recover the bank ${n.bank_name}!`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&k.delete(`/bank-names/${n.id}`).then(a=>{b(o,r),m("success",a==null?void 0:a.message,a==null?void 0:a.description)}).catch(a=>{if(a.response){const f=a.response.data;m("error",f==null?void 0:f.message,f.description)}})})},permission:"bank_delete",textClass:"text-danger"}];return s("div",{children:[e(K,{loaderVisible:g}),s("div",{className:"d-flex justify-content-between align-content-center gap-2 mb-3",children:[e("h1",{className:"title-text mb-0",children:"List Of Banks"}),e("div",{children:s($,{className:"custom-btn btn-add",onClick:z,children:[e(R,{icon:U})," Add New"]})})]}),s(W,{className:"animated fadeInDown wiz-card-mh",children:[e("div",{className:"mb-4",children:e("input",{className:"custom-form-control",type:"text",placeholder:"Search bank...",value:v,onChange:n=>L(n.target.value)})}),e("div",{className:"table-responsive-sm",children:s("table",{className:"table table-bordered custom-table",children:[e("thead",{children:s("tr",{children:[p==="admin"&&e("th",{children:"id"}),e("th",{className:"text-center",children:"BANK NAME"}),e("th",{className:"text-center",children:"ADDED BY"}),e("th",{className:"text-center",children:"ADDED On"}),p==="admin"&&e("th",{className:"text-center",children:"ACTIONS"})]})}),g&&e("tbody",{children:e("tr",{children:e("td",{colSpan:3,className:"text-center",children:"Loading..."})})}),!g&&e("tbody",{children:_.length===0?e("tr",{children:e("td",{colSpan:3,className:"text-center",children:"No bank found"})}):_.map(n=>s("tr",{className:"text-center",children:[p==="admin"&&e("td",{children:n.id}),e("td",{children:n.bank_name}),e("td",{}),e("td",{}),p==="admin"&&e("td",{children:e(q,{actionBtn:O,element:n})})]},n.id))})]})}),C>1&&s(N,{children:[e(N.Prev,{disabled:o===1,onClick:()=>B(o-1)}),y,e(N.Next,{disabled:o===C,onClick:()=>B(o+1)})]})]}),s(d,{show:w,centered:!0,onHide:M,className:"custom-modal",children:[e(d.Header,{closeButton:!0,children:e(d.Title,{children:c.id?s("span",{children:["Update Bank Name: ",c.bank_name]}):e("span",{className:"title-text",children:"Add New Bank"})})}),e(d.Body,{children:s("div",{className:"form-group",children:[e("label",{htmlFor:"bank_name",className:"custom-form-label",children:"Bank Name"}),e("input",{value:c.bank_name,onChange:n=>u({...c,bank_name:n.target.value}),className:"custom-form-control",placeholder:"Bank Name"}),x&&x.bank_name&&e("div",{className:"text-danger mt-2",children:x.bank_name[0]})]})}),s(d.Footer,{children:[e(A,{className:"btn-sm",variant:"primary",onClick:H,children:"Save"}),e(A,{className:"btn-sm",variant:"secondary",onClick:M,children:"Close"})]})]})]})}export{ae as default};
