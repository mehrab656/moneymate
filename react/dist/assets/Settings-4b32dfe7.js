import{a as n,j as e,F as b,r as m,az as j,aA as H,f as R,e as U,S as $,m as T}from"./index-8e1ee696.js";import{M as F}from"./index-74298ed0.js";import{ao as W,an as J,C as A,R as h,a as r,b as N,aw as w,n as I}from"./AuthRoutes-2e952a6b.js";import{B as Q,g as V,N as q,a as X,b as Y,c as Z,T as ee}from"./Tab-e8b7d17a.js";import{m as E,f as te,F as t}from"./Form-833e738d.js";import{S as x}from"./Stack-0f0f80e9.js";import{I as ne}from"./Image-bab1f910.js";import{S as ae}from"./react-select.esm-c00a6ec0.js";import"./CardHeaderContext-cb83d0a9.js";import"./unsupportedIterableToArray-5ed4c917.js";import"./classCallCheck-25f3f0e0.js";import"./toConsumableArray-46a81798.js";function ie(o){let i;return te(o,c=>{i==null&&(i=c.props.eventKey)}),i}function oe(o){const{title:i,eventKey:c,disabled:g,tabClassName:f,tabAttrs:p,id:v}=o.props;return i==null?null:e(Z,{as:"li",role:"presentation",children:e(J,{as:"button",type:"button",eventKey:c,disabled:g,id:v,className:f,...p,children:i})})}const M=o=>{const{id:i,onSelect:c,transition:g,mountOnEnter:f=!1,unmountOnExit:p=!1,variant:v="tabs",children:u,activeKey:C=ie(u),...y}=W(o,{activeKey:"onSelect"});return n(Q,{id:i,activeKey:C,onSelect:c,transition:V(g),mountOnEnter:f,unmountOnExit:p,children:[e(q,{...y,role:"tablist",as:"ul",variant:v,children:E(u,oe)}),e(X,{children:E(u,_=>{const d={..._.props};return delete d.title,delete d.disabled,delete d.tabClassName,delete d.tabAttrs,e(Y,{...d})})})]})};M.displayName="Tabs";const se=M;function B({settings:o,handleFunc:i,submit:c}){return e(b,{children:e(A,{children:n(t,{children:[n(h,{children:[e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.name",children:[e(t.Label,{children:"Company Name"}),e(t.Control,{type:"text",placeholder:"abc company",value:o.company_name,onChange:i})]})}),e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.site",children:[e(t.Label,{children:"Web Site"}),e(t.Control,{type:"text",placeholder:"companydomainname.com",value:o.web_site,onChange:i})]})})]}),n(h,{children:[e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.phone",children:[e(t.Label,{children:"Company Phone"}),e(t.Control,{type:"text",placeholder:"055...",value:o.phone,onChange:i})]})}),e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.landline",children:[e(t.Label,{children:"Company Landline Number"}),e(t.Control,{type:"text",placeholder:"044...",value:o.landline_number,onChange:i})]})})]}),e(h,{children:e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.address",children:[e(t.Label,{children:"Company Address"}),e(t.Control,{value:o.address,onChange:i,as:"textarea",rows:3})]})})})]})})})}function le({settings:o,handleFunc:i,submit:c}){return e(b,{children:e(A,{children:n(t,{children:[n(h,{children:[e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.name",children:[e(t.Label,{children:"Company Name"}),e(t.Control,{type:"text",placeholder:"abc company",value:o.company_name,onChange:i})]})}),e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.site",children:[e(t.Label,{children:"Web Site"}),e(t.Control,{type:"text",placeholder:"companydomainname.com",value:o.web_site,onChange:i})]})})]}),n(h,{children:[e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.phone",children:[e(t.Label,{children:"Company Phone"}),e(t.Control,{type:"text",placeholder:"055...",value:o.phone,onChange:i})]})}),e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.landline",children:[e(t.Label,{children:"Company Landline Number"}),e(t.Control,{type:"text",placeholder:"044...",value:o.landline_number,onChange:i})]})})]}),e(h,{children:e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.address",children:[e(t.Label,{children:"Company Address"}),e(t.Control,{value:o.address,onChange:i,as:"textarea",rows:3})]})})})]})})})}function re({settings:o,handleFunc:i,submit:c}){return e(b,{children:e(A,{children:n(t,{children:[n(h,{children:[e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.currentcy",children:[e(t.Label,{children:"Default Currency"}),e(t.Control,{type:"text",placeholder:"AED,EUR,USD...",value:o.default_currency,onChange:i})]})}),e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.limit",children:[e(t.Label,{children:"Number of Data Per Page"}),e(t.Control,{type:"text",placeholder:"10,20,100...",value:o.num_data_per_page,onChange:i})]})})]}),e(h,{children:e(r,{})})]})})})}const z={pmsName:"",pmsClientID:"",pmsApiKey:""},ce=[{value:"hostaway",label:"HostAway"},{value:"lodgify",label:"Lodgify"},{value:"guesty",label:"Guesty"}];function de({settings:o,handleFunc:i,submit:c}){const[g,f]=m.useState(!1),[p,v]=m.useState(!1),[u,C]=m.useState(z),[y,_]=m.useState({text:"Active",bg:"primary",disable:!1}),[d,K]=m.useState({text:"Connect",bg:"primary",disable:!1});m.useState(z);const[P]=j();H({});const D=async a=>{a.preventDefault();let l=new FormData;l.append("host_away_client_id",u.host_away_client_id),l.append("host_away_api_key",u.host_away_api_key);try{const s=await P({formData:l}).unwrap();I("success",s==null?void 0:s.message,s==null?void 0:s.description),K({text:"Connected",disable:!0,bg:"success"}),_({text:"Disconnect",disable:!1,bg:"danger"})}catch(s){I("error",(s==null?void 0:s.message)||"An error occurred",(s==null?void 0:s.description)||"Please try again later.")}},L=a=>{set};return e(b,{children:n(A,{children:[n(x,{className:"animated fadeInDown mb-3",direction:"horizontal",gap:3,children:[e("div",{className:"p-2",children:p?"Connected":"Not Connected"}),e("div",{className:"p-2 ms-auto",children:"Property Management System"}),e("div",{className:"vr"}),e(N,{ize:"sm",variant:y.bg,onClick:()=>{f(!g)},children:y.text})]}),n(x,{className:"animated fadeInDown mb-3",direction:"horizontal",gap:3,children:[e("div",{className:"p-2",children:"not connected"}),e("div",{className:"p-2 ms-auto",children:"Stripe"}),e("div",{className:"vr"}),e(N,{size:"sm",variant:"primary",children:"Connect"})]}),n(x,{className:"animated fadeInDown mb-3",direction:"horizontal",gap:3,children:[e("div",{className:"p-2",children:"not connected"}),e("div",{className:"p-2 ms-auto",children:"Airbnb"}),e("div",{className:"vr"}),e(N,{variant:"primary",children:"Connect"})]}),n(x,{className:"animated fadeInDown mb-3",direction:"horizontal",gap:3,children:[e("div",{className:"p-2",children:"not connected"}),e("div",{className:"p-2 ms-auto",children:"Booking.com"}),e("div",{className:"vr"}),e(N,{variant:"primary",children:"Connect"})]}),n(w,{show:g,onHide:()=>{f(!g)},backdrop:"static",placement:"end",children:[n(w.Header,{closeButton:!0,children:[e(ne,{src:"hostaway.png",rounded:!0,style:{height:"100px",width:"100px"}}),e(w.Title,{children:"Pms"})]}),n(w.Body,{children:[e("span",{children:"Provide the api key and secret key to connect with Pms."}),n(t,{children:[e(h,{children:e(r,{children:e(ae,{placeholder:"Name of PMS",options:ce,onChange:a=>L(a.value)})})}),e(h,{children:e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.hostawayClient",children:[e(t.Label,{children:"Client ID"}),e(t.Control,{type:"text",placeholder:"7123841...",value:u.host_away_client_id,onChange:a=>C({...u,host_away_client_id:a.target.value})})]})})}),e(h,{children:e(r,{children:n(t.Group,{className:"mb-3",controlId:"company.hostawayApi",children:[e(t.Label,{children:"Hostaway Api Secret"}),e(t.Control,{type:"text",placeholder:"",value:u.host_away_api_key,onChange:a=>C({...u,host_away_api_key:a.target.value})})]})})}),e(h,{children:e(r,{children:e(N,{ize:"sm",variant:d.bg,disabled:d.disable,onClick:a=>{D(a)},children:d.text})})})]})]})]})]})})}const O={company_name:"",web_site:"",default_currency:"",phone:"",landline_number:"",address:"",num_data_per_page:"",public_key:"",secret_key:"",registration_type:"",subscription_price:null,product_api_id:"",associative_categories:[],host_away_api_key:"",host_away_client_id:""},me=[{eventKey:"profile",title:"Profile"},{eventKey:"company",title:"Company"},{eventKey:"general",title:"General"},{eventKey:"integration",title:"Integrations"},{eventKey:"notification",title:"Notifications"}];function we(){const[o,i]=m.useState(O),[c,g]=m.useState(O);m.useState(null);const[f,p]=m.useState(!1),v=R(),[u,C]=m.useState(!1),y=a=>{const{name:l,value:s}=a.target;i(G=>({...G,[l]:s||""}))};U();const{setApplicationSettings:_}=m.useContext($);m.useEffect(()=>{document.title="Application Setting",T.get("/get-application-settings").then(({data:a})=>{var l={...o};Object.keys(a.application_settings).forEach(k=>{l[k]=a.application_settings[k]});const s=a.application_settings,G=JSON.parse(s==null?void 0:s.associative_categories);var S={...l};Object.keys(S).forEach(k=>{S.associative_categories=G}),i(S),_(S)}).catch(()=>{p(!1)})},[]);const d=async a=>{a.preventDefault(),C(!0),p(!0),T.put("/store-application-setting",o).then(l=>{v("/application-settings"),_(o),I("success",l==null?void 0:l.message,l==null?void 0:l.description),p(!1)}).catch(l=>{if(l.response){const s=l.response.data;I("error",s==null?void 0:s.message,s.description)}}).finally(()=>{C(!1)})},[K,P]=m.useState([]),D=()=>{p(!0),T.get("/categories").then(({data:a})=>{p(!1),P(a.data)}).catch(()=>{p(!1)})};m.useEffect(()=>{D()},[]);const L=a=>{if(a==="profile")return n(b,{children:[" ",e(B,{settings:c,handleFunc:y,submit:d})," "]});if(a==="company")return e(b,{children:e(le,{settings:c,handleFunc:y,submit:d})});if(a==="general")return e(b,{children:e(re,{settings:c,handleFunc:y,submit:d})});if(a==="integration")return e(b,{children:e(de,{settings:c,handleFunc:y,submit:d})});if(a==="notification")return n(b,{children:[" ",e(B,{settings:c,handleFunc:y,submit:d})]})};return n(b,{children:[e(F,{loaderVisible:f}),e(se,{defaultActiveKey:"profile",id:"settings-tab",className:"mb-3",fill:!0,children:me.map((a,l)=>e(ee,{eventKey:a.eventKey,title:a.title,children:L(a.eventKey)},`${l}`))})]})}export{we as default};
