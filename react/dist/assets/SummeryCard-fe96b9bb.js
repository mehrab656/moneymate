import{r as g,a as t,j as e,F as u,d as _,m as C}from"./index-8e1ee696.js";import{ae as b,aL as w,aM as B}from"./index-74298ed0.js";import{H as A,C as D,R as d,a as o}from"./AuthRoutes-2e952a6b.js";import{M as h}from"./Modal-bc712426.js";import{T as F}from"./Table-9f2e03c0.js";const S=({item:r,handelPayment:l,currency:n})=>t("tr",{children:[e("td",{children:r==null?void 0:r.payment_number}),e("td",{children:n+" "+(r==null?void 0:r.amount)}),e("td",{children:n+" "+(r==null?void 0:r.date)}),e("td",{className:(r==null?void 0:r.status)==="paid"?"text-center text-success":" text-center text-danger",children:(r==null?void 0:r.status)==="paid"?e(b,{icon:w}):t(u,{children:[e("a",{onClick:()=>l(r),"data-tooltip-id":"dewa-payment","data-tooltip-content":"Pay bill for "+r.date,children:e("span",{className:"aside-menu-icon",children:e(b,{icon:B})})}),e(A,{id:"dewa-payment"})]})})]},r.id),y=g.memo(S),q=({showModal:r,handelCloseModal:l,data:n,currency:m,modalType:i,Toast:x,navigation:N})=>{const f={electricity:" Electricity Details",internet:" Internet Details",cheque:" Cheque Details"},p=async s=>{l(),await _.fire({title:"What is the bill amount?",inputLabel:`${s.payment_number}`,input:"number",inputAutoFocus:!0,inputAutoTrim:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"pay",inputValidator:c=>{if(!c)return"Bill amount is required!"}}).then(c=>{c.isConfirmed&&C.post(`/pay-bill/${s.id}`,{...s,amount:c.value,type:i,date:s.date}).then(({data:a})=>{x.fire({icon:a.status===200?"success":"error",title:a.message}),N("/sectors")}).catch(a=>{a.response&&x.fire({icon:"error",title:a.response.data.message})})})};return e(u,{children:t(h,{show:r,centered:!0,onHide:l,className:"custom-modal modal-lg",children:[e(h.Header,{closeButton:!0,children:e(h.Title,{children:t("span",{children:[" ",n.name+f[i]]})})}),e(h.Body,{children:t(D,{children:[i==="electricity"&&t(u,{children:[t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Account"}),t(o,{xs:12,md:4,children:[e("strong",{children:"Account No: "}),n.el_acc_no]}),t(o,{xs:12,md:4,children:[e("strong",{children:"Business ID: "}),n.el_business_acc_no]}),t(o,{xs:12,md:4,children:[e("strong",{children:"Premises Number: "}),n.el_premises_no]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Notes"}),e(o,{xs:12,md:6,children:n.el_note??"Nothing Found!"})]})]}),i==="internet"&&t(u,{children:[t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Account"}),t(o,{xs:12,md:6,children:[e("strong",{children:"Account No: "}),n.internet_acc_no]}),t(o,{xs:12,md:6,children:[e("strong",{children:"Billing Date: "}),n.internet_billing_date]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Notes"}),e(o,{xs:12,md:6,children:n.int_note??"Nothing Found!"})]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Payment History"}),t(F,{responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"light",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Payment Details"}),e("th",{children:"Amount"}),e("th",{children:"Date"}),e("th",{children:"Status"})]})}),e("tbody",{children:(n==null?void 0:n.payments)&&(n==null?void 0:n.payments.length)>0&&(n==null?void 0:n.payments.map((s,c)=>{if(s.type==="electricity"&&i==="electricity")return e(y,{item:s,handelPayment:p,currency:m},"electricity_row_"+c);if(s.type==="internet"&&i==="internet")return e(y,{item:s,handelPayment:p,currency:m},"internet_row"+c);if(s.type==="cheque"&&i==="cheque")return e(y,{item:s,handelPayment:p,currency:m},"cheque_row"+c)}))})]})]})]})}),e(h.Footer,{children:e("button",{className:"btn btn-primary",onClick:l,children:"Close"})})]})})},$=g.memo(q);export{$ as S};
