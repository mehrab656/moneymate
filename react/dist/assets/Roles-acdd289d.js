import{r as n,S as B,a as s,j as e,L as D,m as h,d as E}from"./index-8e1ee696.js";import{j,ae as k,aR as L}from"./index-74298ed0.js";import{A as _}from"./ActionButtonHelpers-3cc0c4c9.js";import{P as b,H as w,d as F,n as f}from"./AuthRoutes-2e952a6b.js";import{d as l,t as x,T as H,a as $,b as I,c as P,e as O}from"./TableRow-3c1023d1.js";import{T as Y}from"./TablePagination-e52f6c8e.js";import{m as z}from"./makeStyles-7d66d76c.js";import"./LastPage-4ffce3d8.js";import"./Select-2ff9a889.js";import"./utils-a73c94d0.js";import"./useControlled-c67091af.js";import"./useId-bebd534a.js";import"./useFormControl-e95281cb.js";import"./unsupportedIterableToArray-5ed4c917.js";import"./toConsumableArray-46a81798.js";const M=z({root:{width:"100%"},container:{maxHeight:440}});function re(){const[U,m]=n.useState(!1),[p,C]=n.useState([]),[y,S]=n.useState("");M();const[r,u]=n.useState(0),[c,R]=n.useState(20);n.useContext(B);const v=(t,a)=>{u(a)},T=t=>{R(+t.target.value),u(0)},g=(t,a)=>{m(!0),h.get("/roles",{params:{page:t,rowsPerPage:a}}).then(({data:o})=>{m(!1),C(o.data)}).catch(()=>{m(!1)})};n.useEffect(()=>{document.title="Role list",g(r,c)},[r,c]);const i=j(l)(({theme:t})=>({[`&.${x.head}`]:{backgroundColor:"#1E1E2D",color:t.palette.common.white},[`&.${x.body}`]:{fontSize:14}}));let N={weekday:"long",year:"numeric",month:"long",day:"numeric"};const A=[{actionName:"Edit",type:"route",route:"/role/",actionFunction:"editModal",permission:"role_edit",textClass:"text-info"},{actionName:"View",type:"modal",route:"",actionFunction:t=>{h(`/sectorsIncomeExpense/${t.id}`).then(({data:a})=>{}).catch(a=>{console.warn(a)})},permission:"role_view",textClass:"text-warning"},{actionName:"Delete",type:"modal",route:"",actionFunction:t=>{E.fire({title:"Are you sure?",text:"You will not be able to recover the role !",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(a=>{a.isConfirmed&&h.delete(`role/${t.id}`).then(o=>{g(r,c),f("success",o==null?void 0:o.message,o==null?void 0:o.description)}).catch(o=>{if(o.response){const d=o.response.data;f("error",d==null?void 0:d.message,d.description)}})})},permission:"role_delete",textClass:"text-danger"}];return s(b,{sx:{width:"100%",overflow:"hidden"},classes:"root",children:[s("div",{className:"row p-3",children:[e("div",{className:"col-3",children:e("h3",{children:"Role List"})}),e("div",{className:"col-7",children:s("div",{className:"mb-4",children:[e("input",{className:"custom-form-control",type:"text",placeholder:"Search Roles",value:y,"data-tooltip-id":"search-role","data-tooltip-content":"Search Role by role name or added by user name",onChange:t=>S(t.target.value)}),e(w,{id:"search-role"})]})}),e("div",{className:"col-2",children:F("role_create")&&s("div",{className:"d-flex justify-content-between align-content-center gap-2 mb-3",children:[e(D,{className:"btn-add align-right mr-3",to:"/roles/new","data-tooltip-id":"add-role","data-tooltip-content":"Add New Role",children:e(k,{icon:L})}),e(w,{id:"add-role"})]})})]}),e(H,{component:b,children:s($,{"aria-label":"Roles Table",children:[e(I,{children:s(P,{children:[e(i,{children:e("b",{children:"Role"})}),e(i,{children:e("b",{children:"Status"})}),e(i,{children:e("b",{children:"Added By"})}),e(i,{children:e("b",{children:"Date"})}),e(i,{children:e("b",{children:"Actions"})})]})}),e(O,{children:p.map(t=>s(P,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e(l,{children:t.role}),e(l,{children:t.status===1?"Active":"Inactive"}),e(l,{children:t.added_by}),e(l,{children:new Date(t.date).toLocaleDateString("en-US",N)}),e(l,{children:e(_,{actionBtn:A,element:t})})]},t.id))})]})}),e(Y,{rowsPerPageOptions:[20,50,500],component:"div",count:p.length,rowsPerPage:c,page:r,onPageChange:v,onRowsPerPageChange:T})]})}export{re as default};
