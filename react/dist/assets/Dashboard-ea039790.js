import{r as b,a,j as e,S as g,v as S,w as A,x as M,F as T}from"./index-8e1ee696.js";import{P as R,C as j,A as I,p as F,a as $,D as k}from"./index-845fc5ed.js";import{S as d,d as N}from"./SummeryCard-06eb799a.js";import{d as L,a as W}from"./AddCardTwoTone-be870dfa.js";import{al as q,M as z}from"./index-74298ed0.js";import{r as Q,a as E}from"./jsx-runtime_commonjs-proxy-221d5456.js";import{W as f}from"./WizCard-c3a4d722.js";import{c as C,G as x,B as H,S as _}from"./AuthRoutes-2e952a6b.js";import"./isMuiElement-18bae589.js";import"./useId-bebd534a.js";import"./useControlled-c67091af.js";function O({title:m,getExpenseGraphData:t,loading:i}){const[h,n]=b.useState([]),r=c=>{const o=c.labels.map((l,v)=>({label:l,value:c.data[v],backgroundColor:p()}));n(o)};b.useEffect(()=>{var c,o;(c=t==null?void 0:t.data)!=null&&c.labels&&((o=t==null?void 0:t.data)==null?void 0:o.labels.length)>0&&r(t==null?void 0:t.data)},[]);const p=()=>`#${Math.floor(Math.random()*16777215).toString(16)}`,s=[...h].sort((c,o)=>o.value-c.value),u={labels:s.map(c=>c.label),datasets:[{data:s.map(c=>c.value),backgroundColor:s.map(c=>c.backgroundColor)}]};return a("div",{style:{width:"100%"},children:[e("h1",{className:"title-text mb-0 text-center",children:m}),e("br",{}),i?e("p",{className:"text-center",children:"Loading..."}):s.length>0?e("div",{style:{display:"flex",justifyContent:"center"},children:e("div",{style:{width:"80%",maxWidth:"400px"},children:e(R,{data:u,options:{plugins:{legend:{position:"bottom",labels:{boxWidth:10,usePointStyle:!0}}}}})})}):e("p",{className:"text-center",children:"No data available"})]})}var y={},V=q;Object.defineProperty(y,"__esModule",{value:!0});var w=y.default=void 0,J=V(Q()),K=E;w=y.default=(0,J.default)((0,K.jsx)("path",{d:"M19 13H5v-2h14z"}),"RemoveTwoTone");const U=C(e("path",{d:"M4 11.5v4c0 .83.67 1.5 1.5 1.5S7 16.33 7 15.5v-4c0-.83-.67-1.5-1.5-1.5S4 10.67 4 11.5m6 0v4c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5M3.5 22h16c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5h-16c-.83 0-1.5.67-1.5 1.5S2.67 22 3.5 22M16 11.5v4c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5M10.57 1.49l-7.9 4.16c-.41.21-.67.64-.67 1.1C2 7.44 2.56 8 3.25 8h16.51C20.44 8 21 7.44 21 6.75c0-.46-.26-.89-.67-1.1l-7.9-4.16c-.58-.31-1.28-.31-1.86 0"}),"AccountBalanceRounded"),X=C(e("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddTwoTone");j.register(I,F,$);const Y=({title:m,getBudgetPieData:t,loading:i})=>{const[h,n]=b.useState(null),r=u=>{const c=u.map(l=>l.name),o=u.map(l=>l.spent_amount);n({labels:c,datasets:[{label:"",data:o,backgroundColor:["rgba(243, 92, 102, 0.8)","rgba(61, 136, 198, 0.8)","rgba(249, 156, 71, 0.8)","rgba(106, 191, 141, 0.8)","rgba(150, 122, 195, 0.8)","rgba(250, 127, 81, 0.8)"],borderColor:["rgba(243, 92, 102, 1)","rgba(61, 136, 198, 1)","rgba(249, 156, 71, 1)","rgba(106, 191, 141, 1)","rgba(150, 122, 195, 1)","rgba(250, 127, 81, 1)"],borderWidth:2}]})};b.useEffect(()=>{t&&(t==null?void 0:t.length)>0&&r(t)},[]);const p={responsive:!0,maintainAspectRatio:!0},s=t!=null&&t.error?t==null?void 0:t.error:"No data available";return e("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:a("div",{style:{width:"100%",textAlign:"center"},children:[e("h1",{className:"title-text mb-0",children:m}),e("br",{}),e("div",{style:{display:"flex",justifyContent:"center"},children:e("div",{style:{width:"45%",textAlign:"center"},children:i?e("p",{children:"Loading..."}):h?e(k,{data:h,options:p,width:200,height:200}):e("p",{children:s})})})]})})},Z=Y,B=()=>e(x,{container:!0,spacing:2,children:[...Array(6)].map((m,t)=>e(x,{item:!0,xs:12,sm:6,md:4,children:a(H,{sx:{width:"100%",padding:2,borderRadius:2,boxShadow:1,display:"flex",flexDirection:"column",gap:2,mb:2},children:[e(_,{variant:"circle",width:40,height:40}),e(_,{variant:"text",width:"80%",height:30}),e(_,{variant:"text",width:"60%",height:20})]})},t))}),G=B;function se(){const{applicationSettings:m,userRole:t}=b.useContext(g),{default_currency:i,registration_type:h}=m,{data:n,isFetching:r}=S(),{data:p,isFetching:s}=A(),{data:u,isFetching:c}=M();b.useEffect(()=>{document.title="Dashboard"},[]);const o=r||s||c,l=i!==void 0?i:"";return a(T,{children:[e(z,{loaderVisible:o}),r&&e(G,{}),!r&&e("div",{className:"mb-4",children:a("div",{className:"row g-4",children:[e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.income_of_this_month,summary:"Income this month",icon:e(N,{}),iconClassName:"icon-success",currency:l})}),e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.expense_of_this_month,summary:"Expense this month",icon:e(L,{}),iconClassName:"icon-danger",currency:l})}),e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.total_balance,summary:"Total account balance",icon:e(W,{}),iconClassName:"icon-success",currency:l})}),e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.total_lend,summary:"Total lend amount",icon:e(X,{}),iconClassName:"icon-primary",currency:l})}),e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.total_borrow,summary:"Total borrow amount",icon:e(w,{}),iconClassName:"icon-danger",currency:l})}),e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.number_of_bank_account,summary:"Total bank account",icon:e(U,{}),iconClassName:"icon-danger"})}),h==="subscription"&&t==="admin"&&e("div",{className:"col-md-6 col-lg-4",children:e(d,{value:n==null?void 0:n.total_subscription_amount_of_this_month,summary:"Subscription amount of this month",icon:e(N,{}),iconClassName:"icon-danger",currency:i})})]})}),a("div",{className:"row",children:[e("div",{className:"col-12 col-md-7",children:e(f,{className:"animated fadeInDown",children:e(O,{title:"Monthly Expense chart",getExpenseGraphData:p,loading:s})})}),e("div",{className:"col-12 col-md-5",children:e(f,{className:"animated fadeInDown",children:e(Z,{title:"Expense categories vs budget",getBudgetPieData:u,loading:c})})})]}),e("br",{}),e(f,{className:"animated fadeInDown",children:e("div",{className:"row",children:a("div",{className:"col-12",children:[e("h1",{className:"title-text text-center",children:"Active Budget Information"}),a("table",{className:"table table-bordered custom-table",children:[e("thead",{children:a("tr",{className:"text-center",children:[e("th",{children:"Budget Name"}),e("th",{children:"Proposed Amount"}),e("th",{children:"Available Amount"})]})}),r&&e("tbody",{children:e("tr",{className:"text-center",children:e("td",{colSpan:6,className:"text-center",children:"Loading..."})})}),!r&&e("tbody",{children:(n==null?void 0:n.active_budget)&&(n==null?void 0:n.active_budget.length)>0&&(n==null?void 0:n.active_budget.map(v=>a("tr",{className:"text-center",children:[e("td",{children:v.budget_name}),e("td",{children:i+" "+v.original_budget_amount}),e("td",{children:i+" "+v.amount_available})]},v.id)))})]})]})})}),e("br",{})]})}export{se as default};
