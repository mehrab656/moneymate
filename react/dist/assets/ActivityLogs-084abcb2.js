import{r as s,a as p,j as e,F as K,m as A}from"./index-8e1ee696.js";import{al as L,j as H}from"./index-74298ed0.js";import{r as $,a as k}from"./jsx-runtime_commonjs-proxy-221d5456.js";import{c as w,d as u,a as M,e as B,t as D,T as N,b as J}from"./TableRow-3c1023d1.js";import{av as V,B as W,P as E}from"./AuthRoutes-2e952a6b.js";import{C as G}from"./Collapse-bfde31ed.js";import{T as Q}from"./Typography-e228ba3d.js";import{T as X}from"./TablePagination-e52f6c8e.js";import"./isMuiElement-18bae589.js";import"./useId-bebd534a.js";import"./useControlled-c67091af.js";import"./LastPage-4ffce3d8.js";import"./Select-2ff9a889.js";import"./utils-a73c94d0.js";import"./useFormControl-e95281cb.js";var P={},Y=L;Object.defineProperty(P,"__esModule",{value:!0});var U=P.default=void 0,Z=Y($()),ee=k;U=P.default=(0,Z.default)((0,ee.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");var C={},te=L;Object.defineProperty(C,"__esModule",{value:!0});var z=C.default=void 0,re=te($()),ae=k;z=C.default=(0,re.default)((0,ae.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");const ne=t=>{const[r,o]=s.useState(!1);let{id:a,data_records:n,descriptions:m,log_type:l,object:h,created_at:y,view_status:b,view_by:f,uid:d}=t.row,c={weekday:"long",year:"numeric",month:"long",day:"numeric"};const g=Object.entries(JSON.parse(n));let v=[];const x=g.filter(i=>!i[0].includes("id")&&!i[0].includes("slug")).map(i=>{if(i.includes("date")||i.includes("created_at")||i.includes("deleted_at")||i.includes("updated_at")){const R=new Date(i[1]);i[1]=R.toDateString()}return i}),[F,T]=s.useState("#f5dfdf"),[I,j]=s.useState(0),q=i=>{o(!r),r||A.post(`/update-log-status/${i}`).then(R=>{T("#ffffff"),j(1)})};return s.useEffect(()=>{b&&(T("#ffffff"),j(1))},[r]),f&&(v=JSON.parse(f)),p(s.Fragment,{children:[p(w,{sx:{"& > *":{borderBottom:"unset"}},style:{background:F},children:[e(u,{children:e(V,{"aria-label":"expand row",size:"small",onClick:()=>q(d),children:r?e(U,{}):e(z,{})})}),e(u,{children:m}),e(u,{children:l==null?void 0:l.toUpperCase()}),e(u,{children:h==null?void 0:h.toUpperCase()}),e(u,{children:new Date(y).toLocaleDateString("en-US",c)}),p(u,{children:[I?"seen by":"unseen",v.length>0&&p(K,{children:["(",e("span",{style:{fontSize:"10px"},children:v.map(i=>i.name+",")}),")"]})]})]}),e(w,{children:e(u,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e(G,{in:r,timeout:"auto",unmountOnExit:!0,children:p(W,{sx:{margin:1},children:[e(Q,{variant:"h6",gutterBottom:!0,component:"div",children:"Details"}),e(M,{size:"small","aria-label":"purchases",children:e(B,{children:x.map(i=>p(w,{children:[p(u,{component:"th",scope:"row",children:[e("b",{children:i[0].replaceAll("_"," ").toUpperCase()})," : "]}),e(u,{children:e("span",{children:i[1]})})]},Math.random().toString(36).substring(2)))})})]})})})})]})},oe=s.memo(ne);var ie={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function le(t){if(typeof t=="number")return{value:t,unit:"px"};var r,o=(t.match(/^[0-9.]*/)||"").toString();o.includes(".")?r=parseFloat(o):r=parseInt(o,10);var a=(t.match(/[^0-9]*$/)||"").toString();return ie[a]?{value:r,unit:a}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(r,"px.")),{value:r,unit:"px"})}function O(t){var r=le(t);return"".concat(r.value).concat(r.unit)}var se=function(t,r,o){var a="react-spinners-".concat(t,"-").concat(o);if(typeof window>"u"||!window.document)return a;var n=document.createElement("style");document.head.appendChild(n);var m=n.sheet,l=`
    @keyframes `.concat(a,` {
      `).concat(r,`
    }
  `);return m&&m.insertRule(l,0),a},_=globalThis&&globalThis.__assign||function(){return _=Object.assign||function(t){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_.apply(this,arguments)},ce=globalThis&&globalThis.__rest||function(t,r){var o={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(o[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(o[a[n]]=t[a[n]]);return o},de=se("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function ue(t){var r=t.loading,o=r===void 0?!0:r,a=t.color,n=a===void 0?"#000000":a,m=t.speedMultiplier,l=m===void 0?1:m,h=t.cssOverride,y=h===void 0?{}:h,b=t.size,f=b===void 0?15:b,d=t.margin,c=d===void 0?2:d,g=ce(t,["loading","color","speedMultiplier","cssOverride","size","margin"]),v=_({display:"inherit"},y),S=function(x){return{display:"inline-block",backgroundColor:n,width:O(f),height:O(f),margin:O(c),borderRadius:"100%",animation:"".concat(de," ").concat(.7/l,"s ").concat(x%2?"0s":"".concat(.35/l,"s")," infinite linear"),animationFillMode:"both"}};return o?s.createElement("span",_({style:v},g),s.createElement("span",{style:S(1)}),s.createElement("span",{style:S(2)}),s.createElement("span",{style:S(3)})):null}function Te(){const[t,r]=s.useState(!1),[o,a]=s.useState([]),[n,m]=s.useState(0),[l,h]=s.useState(20),y=(c,g)=>{m(g)},b=c=>{h(+c.target.value),m(0)},f=(c,g)=>{r(!0),A.get("/activity-logs",{params:{page:c,rowsPerPage:g}}).then(({data:v})=>{r(!1),a(v.data)}).catch(()=>{r(!1)})};s.useEffect(()=>{document.title="Activity Log",f(n,l)},[n,l]);const d=H(u)(({theme:c})=>({[`&.${D.head}`]:{backgroundColor:"#1E1E2D",color:c.palette.common.white},[`&.${D.body}`]:{fontSize:14}}));return p(E,{sx:{width:"100%",overflow:"hidden"},children:[e(N,{sx:{maxHeight:840},component:E,children:p(M,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[e(J,{children:p(w,{children:[e(d,{}),e(d,{children:e("b",{children:"Descriptions"})}),e(d,{children:e("b",{children:"Activity Type"})}),e(d,{children:e("b",{children:"Object"})}),e(d,{children:e("b",{children:"Date"})}),e(d,{children:e("b",{children:"View Status"})})]})}),p(B,{children:[t&&e(w,{children:e(u,{component:"th",scope:"row",colSpan:"6",align:"center",children:e("span",{children:e(ue,{loading:!0,color:"#36d7b7"})})})}),o.slice(n*l,n*l+l).map(c=>e(oe,{row:c},Math.random().toString(36).substring(2)))]})]})}),e(X,{rowsPerPageOptions:[20,50,500],component:"div",count:o.length,rowsPerPage:l,page:n,onPageChange:y,onRowsPerPageChange:b})]})}export{Te as default};
