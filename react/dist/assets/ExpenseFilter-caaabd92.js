import{j as e,F as A,a as r,r as d,h as q,$ as P}from"./index-8e1ee696.js";import{M as c}from"./Modal-bc712426.js";import{C as $,R as g,a as i,b as D}from"./AuthRoutes-2e952a6b.js";import{ae as w,am as R}from"./index-74298ed0.js";import{T as b,N as S}from"./Tab-e8b7d17a.js";import{I as C}from"./InputGroup-ffc38a75.js";import{F as h}from"./Form-833e738d.js";const ee=({handelCloseModal:N,title:y,data:s,currency:v})=>e(A,{children:r(c,{size:"md",show:!0,centered:!0,onHide:N,className:"custom-modal modal-lg",children:[e(c.Header,{closeButton:!0,children:e(c.Title,{children:e("span",{children:y})})}),e(c.Body,{children:r($,{children:[r(g,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"User Details"}),r(i,{xs:6,md:6,children:[e("strong",{children:"Expense By: "}),s.user_name]}),r(i,{xs:12,md:6,children:[e("strong",{children:"Expense Date: "}),s.date]})]}),r(g,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Bank Details"}),r(i,{xs:12,md:12,children:[e("strong",{children:"Bank Name: "}),s.account.label]})]}),r(g,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Amount"}),r(i,{xs:4,md:4,children:[e("strong",{children:"Amount: "}),v+" "+s.amount]}),r(i,{xs:4,md:4,children:[e("strong",{children:"Refundable: "}),v+" "+s.refundable_amount]}),r(i,{xs:4,md:4,children:[e("strong",{children:"Refunded: "}),v+" "+s.refunded_amount]})]}),r(g,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Description"}),r(i,{xs:9,md:9,children:[e("strong",{children:"Description: "}),s.description]}),r(i,{xs:3,md:3,children:[e("strong",{children:"Attachment: "}),s.attachment]})]}),r(g,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Others"}),r(i,{xs:6,md:6,children:[e("strong",{children:"Note: "}),s.note]}),r(i,{xs:6,md:6,children:[e("strong",{children:"Reference: "}),s.reference]})]})]})}),e(c.Footer,{children:e("button",{className:"btn btn-primary",onClick:N,children:"Close"})})]})}),he=ee,_=[{key:"filter-report-by-sector",name:"Sector"},{key:"filter-report-by-categories",name:"Categories"},{key:"filter-report-by-others",name:"Others"},{key:"filter-report-by-date",name:"Date"}],re=({showModal:N,closeModal:y,resetFilter:s,submitFilter:v,queryParams:o,setQueryParams:m})=>{const[G,K]=d.useState(_[0].key),[O,z]=d.useState([]),[L,k]=d.useState(!1),[T,I]=d.useState(!1),[B,H]=d.useState(""),[E,j]=d.useState(""),[V,M]=d.useState([]),{data:u,isFetching:U,isError:te}=q({skip:!T}),{data:p,isFetching:J,isError:le}=P({categoryType:"expense"},{skip:!L});d.useEffect(()=>{u!=null&&u.data&&(z(u.data),I(!1)),p!=null&&p.data&&(M(p.data),k(!1))},[u==null?void 0:u.data,p==null?void 0:p.data]);const x=O.filter(n=>n.label.toLowerCase().includes(B.toLowerCase())),F=V.filter(n=>n.label.toLowerCase().includes(E.toLowerCase())),W=(n,t)=>{let l=o.sectorIDS,a=o.sectorNames;n.target.checked?(l=l.concat(t.value),a=a.concat(t.label)):(l=l.filter(f=>f!==t.value),a=a.filter(f=>f!==t.label)),m({...o,sectorIDS:l,sectorNames:a})},X=(n,t)=>{let l=o.categoryIDS,a=o.categoryNames;n.target.checked?(l=l.concat(t.value),a=a.concat(t.label)):(l=l.filter(f=>f!==t.value),a=a.filter(f=>f!==t.label)),m({...o,categoryIDS:l,categoryNames:a})},Y=()=>{I(!0)},Z=()=>{k(!0)},Q=n=>{if(n==="filter-report-by-sector")return r(b.Pane,{eventKey:"filter-report-by-sector",children:[r("label",{className:"custom-form-label",htmlFor:"filter-by-sector",children:["Filter By Sectors",e(w,{icon:R,className:"reload-icon float-end",onClick:Y,spin:U,title:"reload sectors"})]}),e("div",{className:"form-group mb-1",children:e("input",{className:"custom-form-control",placeholder:"search by keywards",value:B,onChange:t=>H(t.target.value)})}),e("span",{className:"results",children:`Found ${x.length} Results`}),e("div",{className:"report-filter-list",children:x.length>0?x.map((t,l)=>r(C,{className:"mb-3",size:"sm",children:[e(C.Checkbox,{"aria-label":`Checkbox for ${t.label}`,id:t.value,checked:o.sectorIDS.includes(t.value),onChange:a=>{W(a,t)}}),e(h.Control,{type:"text",value:t.label,disabled:!0,"aria-describedby":"basic-addon3"})]},`sector-${l}`)):"Nothing found"})]});if(n==="filter-report-by-categories")return r(b.Pane,{eventKey:"filter-report-by-categories",children:[r("label",{className:"custom-form-label",htmlFor:"filter-by-sector",children:["Filter By Categories",e(w,{icon:R,className:"reload-icon float-end",onClick:Z,spin:J,title:"reload category"})]}),e("div",{className:"form-group mb-1",children:e("input",{className:"custom-form-control",placeholder:"search by keywards",value:E,onChange:t=>j(t.target.value)})}),e("span",{className:"results",children:`Found ${F.length} Results`}),e("div",{className:"report-filter-list",children:F.length>0?F.map((t,l)=>r(C,{className:"mb-3",size:"sm",children:[e(C.Checkbox,{"aria-label":`Checkbox for ${t.label}`,id:t.value,checked:o.categoryIDS.includes(t.value),onChange:a=>{X(a,t)}}),e(h.Control,{type:"text",value:t.label,disabled:!0,"aria-describedby":"basic-addon3"})]},`category-${l}`)):"Nothing found"})]});if(n==="filter-report-by-others")return r(b.Pane,{eventKey:"filter-report-by-others",children:[r("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"expense-filter-order-by",children:"Order By"}),r("select",{className:"form-control",name:"expense-filter-order-by",value:o.orderBy,onChange:t=>{const l=t.target.value||"";m({...o,orderBy:l})},children:[e("option",{defaultValue:!0,children:"Filter By Order Column"}),e("option",{value:"id",children:"Id"}),e("option",{value:"date",children:"Date"}),e("option",{value:"amount",children:"Amount"}),e("option",{value:"refundable_amount",children:"Refundable Amount"}),e("option",{value:"refunded_amount",children:"Refunded Amount"})]})]}),r("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"expense-filter-order",children:"Order"}),r("select",{className:"form-control",value:o.order,id:"order",name:"order",onChange:t=>{const l=t.target.value||"";m({...o,order:l})},children:[e("option",{defaultValue:!0,children:"Filter By Order"}),e("option",{value:"DESC",children:"DESCENDING"}),e("option",{value:"ASC",children:"ASCENDING"})]})]}),r("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"expense-filter-limit",children:"Limit"}),r("select",{className:"form-control",name:"expense-filter-limit",value:o.limit,onChange:t=>{const l=t.target.value||"";m({...o,limit:l})},children:[e("option",{defaultValue:!0,children:"Filter By Limit"}),e("option",{value:"10",children:"10"}),e("option",{value:"20",children:"20"}),e("option",{value:"50",children:"50"}),e("option",{value:"100",children:"100"}),e("option",{value:"500",children:"500"}),e("option",{value:"1000",children:"1000"})]})]})]});if(n==="filter-report-by-date")return r(b.Pane,{eventKey:"filter-report-by-date",children:[r(h.Group,{controlId:"start_date",children:[e(h.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"From"}),e(h.Control,{size:"sm",type:"date",value:o.start_date,onChange:t=>{m({...o,start_date:t.target.value})}})]}),r(h.Group,{controlId:"to_date",children:[e(h.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"To"}),e(h.Control,{size:"sm",type:"date",value:o.end_date,onChange:t=>{m({...o,end_date:t.target.value})}})]})]})};return e(A,{children:r(c,{show:N,onHide:y,backdrop:"static",keyboard:!1,children:[e(c.Header,{closeButton:!0,children:e(c.Title,{children:"Filters"})}),e(c.Body,{className:"filter-modal-body",children:e($,{children:e(b.Container,{id:"left-tabs-example",defaultActiveKey:"filter-report-by-sector",children:r(g,{className:"filter-modal-row",children:[e(i,{md:6,xs:6,className:"filter-column",children:e(S,{variant:"pills",className:"flex-column",children:_.map(n=>e(S.Item,{children:e(S.Link,{eventKey:n.key,onClick:()=>{K(n.key)},children:n.name})},n.key))})}),e(i,{md:6,xs:6,className:"filter-column",children:e(b.Content,{children:Q(G)})})]})})})}),r(c.Footer,{children:[e(D,{variant:"danger",onClick:s,children:"Reset"}),e(D,{variant:"info",onClick:v,children:"Filter"})]})]})})},me=d.memo(re);export{he as E,me as a};
