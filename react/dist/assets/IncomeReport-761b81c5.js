import{r as n,j as e,F as _,a as t,S as V,m as v}from"./index-8e1ee696.js";import{e as F}from"./index-dc02ab6d.js";import{W as z}from"./WizCard-c3a4d722.js";import{M as H,ae as W,ak as O,aj as $}from"./index-74298ed0.js";import{M as s}from"./Modal-bc712426.js";import{C as q,R as d,a as c}from"./AuthRoutes-2e952a6b.js";import{R as G}from"./index-80c335aa.js";import"./unsupportedIterableToArray-5ed4c917.js";import"./classCallCheck-25f3f0e0.js";const J=({showModal:i,handelCloseModal:l,title:m,data:r,currency:h})=>e(_,{children:t(s,{show:i,centered:!0,onHide:l,className:"custom-modal modal-lg",children:[e(s.Header,{closeButton:!0,children:e(s.Title,{children:e("span",{children:"Incomes Details"})})}),e(s.Body,{children:t(q,{children:[t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Income Details"}),t(c,{xs:12,md:4,children:[e("strong",{children:"Category: "}),r.category_name]}),t(c,{xs:12,md:4,children:[e("strong",{children:"Amount: "}),h+" "+r.amount]}),t(c,{xs:12,md:4,children:[e("strong",{children:"Date: "}),r.date]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Bank Details"}),t(c,{xs:6,md:6,children:[e("strong",{children:"Bank Name: "}),r.bank_name]}),t(c,{xs:12,md:6,children:[e("strong",{children:"Account Number: "}),r.account_number]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Description"}),t(c,{xs:9,md:9,children:[e("strong",{children:"Description: "}),r.description]}),t(c,{xs:3,md:3,children:[e("strong",{children:"Attachment: "}),r.attachment]})]}),t(d,{className:"border p-2",children:[e("strong",{className:"text-primary",children:"Others"}),t(c,{xs:6,md:6,children:[e("strong",{children:"Note: "}),r.note]}),t(c,{xs:6,md:6,children:[e("strong",{children:"Reference: "}),r.reference]})]})]})}),e(s.Footer,{children:e("button",{className:"btn btn-primary",onClick:l,children:"Close"})})]})}),K=n.memo(J);function re(){const i=n.useRef(),[l,m]=n.useState(!1),[r,h]=n.useState([]),[g,f]=n.useState(null),[N,b]=n.useState(null),[M,y]=n.useState([]),[x,I]=n.useState(""),[w,R]=n.useState(parseFloat(0).toFixed(2)),[S,C]=n.useState(""),[E,D]=n.useState(!1),[k,A]=n.useState({id:null,user_id:null,account_id:"",amount:0,category_id:null,category_name:"",description:"",reference:"",date:"",note:"",attachment:""}),{applicationSettings:j}=n.useContext(V);let{default_currency:u}=j;n.useEffect(()=>{v.get("/income-categories").then(({data:a})=>{y(a.categories)}).catch(a=>{console.error("Error loading income categories:",a)})},[y]);const p=()=>{m(!0),v.get("/report/income",{params:{start_date:g,end_date:N,cat_id:x}}).then(({data:a})=>{h(a.incomes),R(a.totalIncome),m(!1)})},B=(a,o)=>{C(o),A(a),D(!0)};n.useEffect(()=>{document.title="Income Report",p()},[]);const T=a=>{a.preventDefault(),p()},L=()=>{f(null),b(null),I(""),p()},P=()=>{C(""),D(!1)};return t(_,{children:[e(H,{loaderVisible:l}),t(z,{className:"animated fadeInDown wiz-card-mh",children:[e("div",{className:"row",children:t("form",{onSubmit:T,children:[e("div",{className:"col-3",children:t("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"income_category",children:"Income Category"}),t("select",{className:"custom-form-control",value:x,id:"income-category",name:"income-category",onChange:a=>{const o=a.target.value||"";I(o)},children:[e("option",{defaultValue:!0,children:"Filter by income category"}),M.map(a=>e("option",{value:a.id,children:a.name},a.id))]})]})}),e("div",{className:"col-3",children:t("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"start_date",children:"Start Date:"}),e(F,{className:"custom-form-control",id:"start_date",selected:g,onChange:a=>f(a),dateFormat:"yyyy-MM-dd"})]})}),e("div",{className:"col-3",children:t("div",{className:"form-group",children:[e("label",{className:"custom-form-label",htmlFor:"end_date",children:"End Date:"}),e(F,{className:"custom-form-control",id:"end_date",selected:N,onChange:a=>b(a),dateFormat:"yyyy-MM-dd"})]})}),t("div",{className:"col-3 mt-4",children:[e("button",{className:"btn-add right mt-2",type:"submit",children:"Filter"}),e("button",{className:"btn btn-warning ml-2",onClick:L,children:"Reset"}),e(G,{trigger:()=>e("button",{className:"btn btn-success ml-2",children:"Print"}),content:()=>i.current})]})]})}),e("div",{className:"row",ref:i,children:e("div",{className:"table-responsive-sm",children:t("table",{className:"table table-bordered custom-table",children:[e("thead",{children:t("tr",{className:"text-center",children:[e("th",{children:"Income Date"}),e("th",{children:"Income Description"}),e("th",{children:"Income Category"}),e("th",{children:"Income Amount"})]})}),l&&e("tbody",{children:e("tr",{className:"text-center",children:e("td",{colSpan:4,className:"text-center",children:"Loading..."})})}),!l&&e("tbody",{children:r.length===0?e("tr",{children:e("td",{colSpan:4,className:"text-center",children:"Nothing found !"})}):r.map((a,o)=>t("tr",{className:"text-center",children:[e("td",{children:a.date}),t("td",{children:[a.description,e("a",{onClick:()=>B(a,o),className:o===S?"text-primary fa-pull-right ":"text-muted fa-pull-right","data-tooltip-id":"expense-details","data-tooltip-content":"View details",children:e("span",{className:"aside-menu-icon",children:e(W,{icon:o===S?O:$})})})]}),e("td",{children:a.category_name}),e("td",{className:"text-end",children:u+" "+ +a.amount})]},a.id))}),e("tfoot",{children:t("tr",{children:[e("td",{className:"text-center fw-bold",colSpan:3,children:"Total Income"}),e("td",{className:"text-end fw-bold",children:u+" "+ +parseFloat(w).toFixed(2)})]})})]})})})]}),e(K,{showModal:E,handelCloseModal:P,title:"Expense Details",data:k,currency:u})]})}export{re as default};
