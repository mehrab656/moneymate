import{f as S,af as _,r as o,e as y,S as C,m,a as t,F as U,j as e}from"./index-8e1ee696.js";import{W as F}from"./WizCard-c3a4d722.js";import{B as E}from"./Badge-ce00077f.js";import{M as L}from"./index-74298ed0.js";import"./AuthRoutes-2e952a6b.js";function M(){const u=S();let{id:h}=_();const[s,c]=o.useState({id:null,name:"",email:"",password:"",password_confirmation:""}),[r,p]=o.useState(null),[i,l]=o.useState(!1),[f,P]=o.useState([]),{setNotification:N}=y(),{applicationSettings:g,userRole:v}=o.useContext(C),{default_currency:b,registration_type:w}=g;h&&o.useEffect(()=>{document.title="View User",l(!0),m.get(`/users/${h}`).then(({data:a})=>{l(!1),c(a)}).catch(()=>{l(!1)})},[]);const x=a=>{a.preventDefault(),l(!0),s.id?m.put(`/users/${s.id}`,s).then(()=>{N("User was successfully updated"),v==="admin"&&u("/users"),l(!1)}).catch(d=>{const n=d.response;n&&n.status===422&&p(n.data.errors),l(!1)}):m.post("/users",s).then(()=>{N("User was successfully created"),u("/users"),l(!1)}).catch(d=>{const n=d.response;n&&n.status===422&&p(n.data.errors),l(!1)})};return t(U,{children:[e(L,{loaderVisible:i}),s.id&&t("h1",{className:"title-text",children:["Update User: ",s.username]}),!s.id&&e("h1",{className:"title-text",children:"New User"}),t(F,{className:"animated fadeInDown wiz-card-mh",children:[i&&e("div",{className:"text-center",children:"Loading..."}),!i&&t("form",{onSubmit:x,className:"custom-form",children:[t("div",{className:"form-group",children:[e("label",{htmlFor:"user_name",className:"custom-form-label",children:"User Name"}),e("input",{className:"custom-form-control",value:s.username,onChange:a=>c({...s,name:a.target.value}),placeholder:"Name"}),r&&r.name&&e("div",{className:"text-danger",children:r.name[0]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"user_email",className:"custom-form-label",children:"User Email"}),e("input",{className:"custom-form-control",value:s.email,onChange:a=>c({...s,email:a.target.value}),placeholder:"Email"}),r&&r.email&&e("div",{className:"text-danger",children:r.email[0]})]}),e("div",{className:"text-danger mb-2",children:e("div",{className:"alert alert-warning",role:"alert",children:"Leave both password field blank, if you do not want to change your account password"})}),t("div",{className:"form-group",children:[e("label",{htmlFor:"password",className:"custom-form-label",children:"Password"}),e("input",{className:"custom-form-control",type:"password",onChange:a=>c({...s,password:a.target.value}),placeholder:"Password"}),r&&r.password&&e("div",{className:"text-danger",children:r.password[0]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"confirm_password",className:"custom-form-label",children:"Confirm Password"}),e("input",{className:"custom-form-control",type:"password",onChange:a=>c({...s,password_confirmation:a.target.value}),placeholder:"Password Confirmation"}),r&&r.password_confirmation&&e("div",{className:"text-danger",children:r.password_confirmation[0]})]}),e("div",{className:"text-end mt-4",children:e("button",{className:"custom-btn btn-brand-primary btn-edit px-5",children:"Save"})})]}),w==="subscription"&&t("div",{className:"table-responsive-sm mt-4",children:[e("div",{className:"text-danger mb-2",children:e("div",{className:"alert alert-info",role:"alert",children:"Subscription History"})}),t("table",{className:"table table-bordered custom-table",children:[e("thead",{children:t("tr",{className:"text-center",children:[e("th",{children:"Start Date"}),e("th",{children:"End Date"}),e("th",{children:"Status"}),e("th",{children:"Amount"})]})}),i&&e("tbody",{children:e("tr",{children:e("td",{colSpan:4,className:"text-center",children:"Loading..."})})}),!i&&e("tbody",{children:f.length===0?e("tr",{children:e("td",{colSpan:4,className:"text-center",children:"No Subscription found"})}):f.map(a=>t("tr",{className:"text-center",children:[e("td",{children:a.current_period_start}),e("td",{children:a.current_period_end}),e("td",{children:e(E,{className:a.status==="active"?"badge-active":"badge-inactive",children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})}),t("td",{children:[" ",b+a.amount]})]},a.id))})]})]})]})]})}export{M as default};
