import{r as s,S as J,ar as K,as as W,at as X,a,j as e,d as H}from"./index-8e1ee696.js";import{M as Z,ae as y,ak as w,ay as ee}from"./index-74298ed0.js";import{R as f,a as c,b as d,e as m,n as k}from"./AuthRoutes-2e952a6b.js";import{T as te}from"./TaskHistoryModal-ca5d7074.js";import{F as l}from"./Form-833e738d.js";import{C as h,a as u,b as v}from"./CardContent-2022634c.js";import{M as C}from"./Modal-bc712426.js";import"./Image-bab1f910.js";const D={quickFilter:"",status:"",toDate:"",fromDate:""};function he(){s.useState(""),s.useContext(J);const[x,E]=s.useState([]),[Y,_]=s.useState(!0),[I,F]=s.useState(!1),[Q,R]=s.useState([]),[i,p]=s.useState(D),[q]=K(),[O]=W(),[j,b]=s.useState(!1),[S,N]=s.useState(!1),M=()=>b(!1),P=()=>b(!0),U=t=>{H.fire({title:"Are you sure?",text:"You want to start this task !",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, start it!",cancelButtonText:"Cancel"}).then(async n=>{if(n.isConfirmed)try{const o=await q({id:t.id}).unwrap();k("success",o.message,o.description)}catch(o){k("error",o.message,o.description||"An error occurred.")}})},$=t=>{H.fire({title:"Are you sure?",text:"You want to close this task !",icon:"warning",input:"text",inputPlaceholder:"Comment(if any)",showCancelButton:!0,confirmButtonText:"Yes, close it!",cancelButtonText:"Cancel"}).then(async n=>{if(n.isConfirmed){let o=new FormData;o.append("comment",n.value);try{const g=await O({id:t.id,formData:o}).unwrap();k("success",g.message,g.description)}catch(g){k("error",g.message,g.description||"An error occurred.")}}})},T=t=>{F(!0),R(t)},z=()=>{F(!1)},{data:r,isFetching:ae,isError:ne}=X({query:i});s.useEffect(()=>{document.title="My Tasks",r!=null&&r.data&&(_(!1),E(r==null?void 0:r.data))},[r,S]);const V=()=>{N(!0),b(!1)},G=()=>{N(!S),p(D),b(!1)},B=x.filter(t=>{if(t.status.value==="pending")return t}),A=x.filter(t=>{if(t.status.value==="ongoing")return t}),L=x.filter(t=>{if(t.status.value==="complete")return t});return a("div",{children:[e(Z,{loaderVisible:Y}),a(f,{style:{marginBottom:"5px"},children:[a(c,{md:6,lg:6,sm:6,children:[e(l.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"Quick Filter"}),a(l.Select,{size:"sm",value:i.quickFilter,"aria-label":"Payment Status",onChange:t=>{p({...i,quickFilter:t.target.value}),N(!0)},children:[e("option",{defaultValue:!0,children:"Quick Filter"}),e("option",{value:"today",children:"Today's All Task"}),e("option",{value:"yesterday",children:"Yesterday's All Task"}),e("option",{value:"tomorrow",children:"Tomorrow's All Task"}),e("option",{value:"this_week",children:"This week's All Task"}),e("option",{value:"last_week",children:"Last week's All Task"}),e("option",{value:"next_week",children:"Next Month's All Task"}),e("option",{value:"this_month",children:"This Month's All Task"})]})]}),e(c,{md:6,lg:6,sm:6,children:e("div",{className:"float-end align-bottom",children:e(d,{type:"button",className:"inline-block btn btn-sm btn-primary",onClick:P,children:"More Filter"})})})]}),a(f,{children:[a("div",{className:"col-md-4 col-sm-12 p-0 border",children:[e("div",{className:"card-box border",children:e("h4",{className:"text-dark header-title",children:"Upcoming"})}),e("ul",{className:"sortable-list taskList list-unstyled ui-sortable",id:"upcoming",children:B.length>0?B.map((t,n)=>e("li",{id:`task-${t.slug}`,children:a(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:[a("div",{className:"my-task-header pending-task-header",children:[e("span",{children:t.date}),e("span",{children:t.startTime+" to "+t.endTime})]}),e(u,{style:{minHeight:"100px"},children:t.description}),a(v,{className:"my-task-card-footer",children:[e(d,{type:"button",className:"inline-block btn btn-sm btn-success",onClick:()=>U(t),children:"Start"}),e("a",{onClick:()=>T(t.workflow),style:{cursor:"pointer"},className:"text-primary","data-tooltip-id":"internet-account","data-tooltip-content":"IncomeShow this internet details",children:e("span",{className:"aside-menu-icon",children:e(y,{icon:w})})})]})]})},t.slug+n+m(8))):e("li",{id:"notFoundUpcomingTask",children:e(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:e(u,{className:"task-not-found",children:"You Have no Upcoming Task"})})},m(8))})]}),a("div",{className:"col-md-4 col-sm-12 p-0 border",children:[e("div",{className:"card-box border",children:e("h4",{className:"text-dark header-title",children:"Ongoing"})}),e("ul",{className:"sortable-list taskList list-unstyled ui-sortable",id:"upcoming",children:A.length>0?A.map((t,n)=>e("li",{id:`task-${t.slug}`,children:a(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:[a("div",{className:"my-task-header ongoing-task-header",children:[e("span",{children:t.date}),e("span",{children:t.startTime+" to "+t.endTime})]}),a(u,{style:{minHeight:"100px"},children:[t.description,e("br",{}),a("span",{children:["Started at : ",t.started_at]})]}),a(v,{className:"my-task-card-footer",children:[e(d,{type:"button",className:"inline-block btn btn-sm btn-primary",onClick:()=>$(t),children:"End"}),e("a",{onClick:()=>T(t.workflow),style:{cursor:"pointer"},className:"text-primary","data-tooltip-id":"internet-account","data-tooltip-content":"IncomeShow this internet details",children:e("span",{className:"aside-menu-icon",children:e(y,{icon:w})})})]})]})},t.slug+n+m(8))):e("li",{id:"notFoundOngoingTask",children:e(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:e(u,{className:"task-not-found",children:"You Have no Ongoing Task"})})},m(8))})]}),a("div",{className:"col-md-4 col-sm-12 p-0 border",children:[e("div",{className:"card-box border",children:e("h4",{className:"text-dark header-title",children:"Completed"})}),e("ul",{className:"sortable-list taskList list-unstyled ui-sortable",id:"upcoming",children:L.length>0?L.map((t,n)=>e("li",{id:`task-${t.id}`,children:a(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:[a("div",{className:"my-task-header complete-task-header",children:[e("span",{children:t.date}),e("span",{children:t.startTime+" to "+t.endTime})]}),a(u,{children:[t.description,e("br",{}),a("span",{children:["Started at : ",t.started_at]}),e("br",{}),a("span",{children:["Ended at : ",t.ended_at]})]}),e(v,{className:"my-task-card-footer float-end",children:e("a",{onClick:()=>T(t.workflow),style:{cursor:"pointer"},className:"text-primary","data-tooltip-id":"internet-account","data-tooltip-content":"IncomeShow this internet details",children:e("span",{className:"aside-menu-icon",children:e(y,{icon:w})})})})]})},t.slug+n+m(8))):e("li",{id:"notFoundCompletedTask",children:e(h,{className:"border-primary ",sx:{p:5},style:{padding:"0px",marginBottom:"20px"},children:e(u,{className:"task-not-found",children:"You Have no Completed Task"})})},m(8))})]})]}),I&&e(te,{handelCloseModal:z,workflow:Q}),a(C,{show:j,onHide:M,backdrop:"static",keyboard:!1,children:[a(C.Body,{children:[e(f,{children:a(c,{md:12,sm:12,children:[e(l.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"Task Status"}),a(l.Select,{size:"sm",value:i.status,"aria-label":"Status",onChange:t=>{p({...i,status:t.target.value})},children:[e("option",{value:"pending",children:"Pending"}),e("option",{value:"ongoing",children:"Ongoing"}),e("option",{value:"completed",children:"Completed"})]})]})}),a(f,{children:[a(c,{md:5,sm:5,lg:5,children:[e(l.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"From "}),e(l.Control,{type:"date",value:i.fromDate,onChange:t=>{p({...i,fromDate:t.target.value})}})]}),e(c,{md:2,sm:2,lg:2,children:e("span",{className:"aside-menu-icon",children:e(y,{icon:ee})})}),a(c,{md:5,sm:5,lg:5,children:[e(l.Label,{style:{marginBottom:"0px"},className:"custom-form-label",children:"To "}),e(l.Control,{type:"date",value:i.toDate,onChange:t=>{p({...i,toDate:t.target.value})}})]})]})]}),a(C.Footer,{className:"filter-footer-combo",children:[e("div",{children:e(d,{type:"button",className:"inline-block btn btn-sm btn-info",onClick:G,children:"Reset"})}),a("div",{children:[e(d,{type:"button",className:"m-2 inline-block btn btn-sm btn-secondary",onClick:M,children:"Close"}),e(d,{type:"button",className:"inline-block btn btn-sm btn-primary",onClick:V,children:"Filter"})]})]})]})]})}export{he as default};
