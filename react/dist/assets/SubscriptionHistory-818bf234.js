import{r as n,f as y,S as j,m as k,j as e,a as s,F as z}from"./index-8e1ee696.js";import{W as D}from"./WizCard-c3a4d722.js";import{P as r}from"./Pagination-982a907e.js";import{B as E}from"./Badge-ce00077f.js";import{M as H}from"./index-74298ed0.js";import"./AuthRoutes-2e952a6b.js";function F(){const[i,c]=n.useState(!1),[h,g]=n.useState([]),[a,p]=n.useState(1),[f,b]=n.useState(0),S=y(),{applicationSettings:x,userRole:N}=n.useContext(j),{default_currency:C,num_data_per_page:v}=x,l=v,d=Math.ceil(f/l);n.useEffect(()=>{document.title="Subscription History",_(a,l)},[a,l]),N==="user"&&S("/dashboard");const _=(t,P)=>{c(!0),k.get("/subscriptions",{params:{page:t,pageSize:P}}).then(({data:u})=>{c(!1),g(u.data),b(u.total)}).catch(()=>{c(!1)})},o=t=>{p(t)},m=[];for(let t=1;t<=d;t++)m.push(e(r.Item,{active:t===a,onClick:()=>o(t),children:t},t));return s(z,{children:[e(H,{loaderVisible:i}),e("div",{className:"d-flex justify-content-between align-content-center gap-2 mb-3",children:e("h1",{className:"title-text mb-0",children:"Subscription Histories"})}),s(D,{className:"animated fadeInDown",children:[e("div",{className:"table-responsive-sm",children:s("table",{className:"table table-bordered custom-table",children:[e("thead",{children:s("tr",{className:"text-center",children:[e("th",{children:"User Name"}),e("th",{children:"Start Date"}),e("th",{children:"End Date"}),e("th",{children:"Status"}),e("th",{children:"Amount"})]})}),i&&e("tbody",{children:e("tr",{children:e("td",{colSpan:4,className:"text-center",children:"Loading..."})})}),!i&&e("tbody",{children:h.length===0?e("tr",{children:e("td",{colSpan:4,className:"text-center",children:"No subscription data found"})}):h.map(t=>s("tr",{className:"text-center",children:[e("td",{children:t.user_name}),e("td",{children:t.current_period_start}),e("td",{children:t.current_period_end}),e("td",{children:e(E,{className:t.status==="Active"?"badge-active":"badge-inactive",children:t.status})}),e("td",{children:C+t.amount})]},t.id))})]})}),d>1&&s(r,{children:[e(r.Prev,{disabled:a===1,onClick:()=>o(a-1)}),m,e(r.Next,{disabled:a===d,onClick:()=>o(a+1)})]})]})]})}export{F as default};
